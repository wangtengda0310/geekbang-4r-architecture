&emsp;&emsp;2021年8月，我所在的公司开发上线了一款三国题材策略类手游。游戏侧重于在线玩家宏大的战场体验以及游戏内各玩法对游戏结果导向的沉浸式体验。公司任命我为系统分析师，我根据所学知识结合实践经验，带领团队为项目进行了详细的面向对象设计。为保障公司利益并与项目成功上线，我在面向对象设计中着重应用了开闭原则、里氏代换原则、接口隔离原则等面向对象设计原则，并将结果汇总为概要设计文档和详细设计文档上报公司领导。游戏耗时20个月，耗资2300万，两年实现成本回收，受到了投资方、运营方的一致好评，并获得了玩家的喜爱。本文针对我在系统分析阶段所做的设计工作详细阐述了所应用到的设计原则，包括并不限于开闭原则、里氏代换原则和接口隔离原则等。

&emsp;&emsp;我的工作为公司节省了3\~7个月的开发成本，后期维护成本亦节省8\~16人月成本。近年来游戏玩家呈现爆发式增长，各游戏分发平台也越来越注重游戏品质和游戏玩家体验。策略类手游凭借其重度玩法、游戏IP以及社交属性在玩家粘度、玩家留存和玩家付费等关键游戏运营指标上有着直接的相较于卡牌游戏、休闲游戏等其他类型手游明显的优势。公司决策层讨论研发一款策略类手游进行深度开发，并预期实现可观受益。因游戏玩家预期集中在东南亚地区，受到中国传统文化的深远影响，因此公司决定采用三国这一大家耳熟能详的历史题材作为游戏背景。玩家扮演三国时期的诸侯英雄，感受从白手起家到一统三国的梦幻体验。游戏开发成本800万，美术外包费用300万，后期运营买量推广费用1200万。技术上采用unity作为客户端开发工具，采用java作为服务端变成语言。玩法采用市面上大多数策略手游的玩法降低玩家上手难度，并特殊设计了“雄才技能”这一特殊玩法提高玩家游戏体验。游戏有着内容丰富、需求变更频繁、运营环境复杂等特点，需要在设计和开发阶段尤其注意面向对象原则来提高游戏的质量以及开发效率。虽然分析并应用各面向对象开发原则增加了额外的工作内容，但是磨刀不误砍柴工，各开发原则都发挥了应有的价值。

&emsp;&emsp;一。开闭原则。开闭原则指的是程序对扩展开放，对修改封闭。\
&emsp;&emsp;游戏开发周期长，业务内容复杂，许多逻辑有着功能内聚但又有需求变更的可能。如何找到业务稳定与需求变更的一个平衡点是系统分析与系统设计阶段一项重要并困难的工作。在游戏开发过程中，我带领团队采用了面向对象设计模式、引入功能特性开关、提供扩展api等方式提高了系统稳定性，并能根据需求对游戏加以扩展。在开发阶段中点应用面向对象设计模式，在运营阶段灵活应用特性开关，在后期多版本迭代过程中大量使用扩展api。使用开闭原则游戏的整个生命周期都得到了质量保障，并为团队带来了客观的隐形收益。

&emsp;&emsp;二。里氏代换原则要求程序的子类实现可以替换父类接口在程序中出现的位置。\
&emsp;&emsp;游戏上线多个国家与地区，因此游戏的美术资源需要根据上线地区做响应的调整，这也是游戏开发中的一项重要阻碍。包括游戏内美术ui的适配和游戏剧情的本地化翻译。在与客户端技术负责人反复沟通与讨论后，我们依赖面向对象设计模式与特性开关设计了一道动态替换机制。该机制依赖一套稳定的api并不同的实现来对需求的变更实现动态扩展，体现在策略模式、抽象工厂模式、组合模式等面向对象设计模式的应用上。在不同的游戏环境切换响应的实现，响应了面向对象开发方法中的里氏代换原则。

&emsp;&emsp;三。接口隔离原则要求不同的功能需求相互隔离互不影响。\
&emsp;&emsp;游戏中有着众多玩家喜爱的特色玩法，比如国战、世界boss等，根据不同的的地区、不同的时间需要做不同的运营策略调整。在此期间，要求游戏各玩法模块之间、同一玩法活动的不同时间阶段和不同游戏玩家之间做到数据与功能的隔离。在接口设计阶段要求接口功能单一、接口之间高内聚、低耦合。不同功能、玩法之间通过不同api做到业务上的隔离。不同地区在切换特性开关后使用策略模式加载不同的业务逻辑实现数据隔离。接口隔离原则使得游戏的健壮性的到了保障，并提高了玩家的游戏体验。

&emsp;&emsp;经过将近2年的开发，游戏终于在日本、韩国、台湾地区以及泰国和越南上线。美中不足的是早期版本设计的部分玩法在后期被移除，但这也在侧面印证了面向对象开发原则对程序质量的保证和对需求变化的快速响应。开闭原则保证了需求变更对游戏的影响限制在了一定范围内，里氏代换原则为需求变更的实施提供了更便捷的操作，接口隔离原则使得需求变更对游戏其他模块产生潜在bug的几率降至最低。还有其他本文未提及的面向对象原则对游戏起到了不可或缺的作用。通过这次开发，我深刻体会到了相较于传统互联网应用开发，面向对象这一技术在游戏开发过程中依然是重要理论与实践操作。我将在今后的工作中继续学习，为公司新项目的开发上线保驾护航。
